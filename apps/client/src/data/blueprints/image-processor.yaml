id: "550e8400-e29b-41d4-a716-446655440003"
name: "Image Processing Workflow"
description: "Batch process images with parallel operations for optimal performance"
category: "media"
type: "composite"
version: "1.0.0"
metadata:
  created: "2025-09-14T12:00:00.000Z"
  modified: "2025-09-14T12:00:00.000Z"
  author: "Atomiton Team"
  tags: ["image", "processing", "batch", "parallel", "media"]

nodes:
  - id: "image-source"
    type: "fileSystem"
    position:
      x: 50
      y: 150
    data:
      operation: "list"
      filePath: "/images/input"
      pattern: "*.{jpg,png,gif}"

  - id: "image-loop"
    type: "loop"
    position:
      x: 250
      y: 150
    data:
      iterateOver: "files"

  - id: "parallel-processor"
    type: "parallel"
    position:
      x: 450
      y: 150
    data:
      concurrency: 4

  - id: "image-resize"
    type: "imageComposite"
    position:
      x: 650
      y: 100
    data:
      operation: "resize"
      width: 800
      height: 600
      maintainAspectRatio: true

  - id: "image-watermark"
    type: "imageComposite"
    position:
      x: 650
      y: 200
    data:
      operation: "watermark"
      watermarkPath: "/assets/watermark.png"
      position: "bottom-right"
      opacity: 0.7

  - id: "save-processed"
    type: "fileSystem"
    position:
      x: 900
      y: 150
    data:
      operation: "write"
      filePath: "/images/output"

edges:
  - id: "source-to-loop"
    source:
      nodeId: "image-source"
      portId: "files"
    target:
      nodeId: "image-loop"
      portId: "collection"

  - id: "loop-to-parallel"
    source:
      nodeId: "image-loop"
      portId: "item"
    target:
      nodeId: "parallel-processor"
      portId: "input"

  - id: "parallel-to-resize"
    source:
      nodeId: "parallel-processor"
      portId: "output"
    target:
      nodeId: "image-resize"
      portId: "image"

  - id: "resize-to-watermark"
    source:
      nodeId: "image-resize"
      portId: "result"
    target:
      nodeId: "image-watermark"
      portId: "image"

  - id: "watermark-to-save"
    source:
      nodeId: "image-watermark"
      portId: "result"
    target:
      nodeId: "save-processed"
      portId: "data"
