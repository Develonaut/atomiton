id: "550e8400-e29b-41d4-a716-446655440002"
name: "Data Transform Pipeline"
description: "Read CSV data, transform it, and output processed results"
category: "data"
type: "composite"
version: "1.0.0"

metadata:
  created: "2025-01-15T00:00:00Z"
  modified: "2025-01-15T00:00:00Z"
  author: "Atomiton Team"
  tags:
    - "data"
    - "transform"
    - "etl"

nodes:
  - id: "csv-source"
    type: "csvReader"
    position:
      x: 50
      y: 100
    data:
      filePath: "/data/sample.csv"
      hasHeaders: true

  - id: "filter-transform"
    type: "transform"
    position:
      x: 300
      y: 100
    data:
      expression: "data.filter(row => row.active === 'true')"

  - id: "aggregate-code"
    type: "code"
    position:
      x: 550
      y: 100
    data:
      code: "const total = data.reduce((sum, row) => sum + parseFloat(row.amount || 0), 0); return { total, count: data.length };"

  - id: "output-file"
    type: "fileSystem"
    position:
      x: 800
      y: 100
    data:
      operation: "write"
      filePath: "/output/results.json"

edges:
  - id: "csv-to-filter"
    source:
      node: "csv-source"
      port: "data"
    target:
      node: "filter-transform"
      port: "input"

  - id: "filter-to-aggregate"
    source:
      node: "filter-transform"
      port: "output"
    target:
      node: "aggregate-code"
      port: "data"

  - id: "aggregate-to-output"
    source:
      node: "aggregate-code"
      port: "result"
    target:
      node: "output-file"
      port: "data"

variables:
  inputPath:
    type: "string"
    defaultValue: "/data/sample.csv"
    description: "Path to input CSV file"
  outputPath:
    type: "string"
    defaultValue: "/output/results.json"
    description: "Path to output JSON file"

settings:
  runtime:
    timeout: 30000
  ui:
    color: "#2196F3"