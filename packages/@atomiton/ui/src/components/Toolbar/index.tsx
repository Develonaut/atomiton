import { useState } from "react";
import Action from "./Action";
import ZoomControl from "./ZoomControl";
import ExportFiles from "./ExportFiles";

type Props = {
  playmode?: boolean;
};

function Toolbar({ playmode }: Props) {
  const [active, setActive] = useState<number | null>(0);

  const actions = [
    {
      id: 0,
      iconPath:
        "M1.933 4.477C1.388 2.9 2.9 1.388 4.477 1.933l12.361 4.272c1.742.602 1.812 3.04.107 3.74l-4.768 1.959a.5.5 0 0 0-.272.272l-1.959 4.768c-.7 1.705-3.138 1.635-3.74-.107L1.933 4.477zm2.054-1.126a.5.5 0 0 0-.636.636l4.272 12.361a.5.5 0 0 0 .935.027l1.959-4.768a2 2 0 0 1 1.09-1.09l4.768-1.959a.5.5 0 0 0-.027-.935L3.987 3.351z",
      onClick: () => {},
      tooltip: (
        <>
          Select <span>V</span>
        </>
      ),
    },
    {
      id: 1,
      iconPath:
        "M5.248 2.727c1.188-.713 2.709-.289 3.387.932l1.34 2.414 3.053-1.832c1.543-.927 3.504-.427 4.461 1.093l.099.167.785 1.414c1.895 3.412.771 7.774-2.523 9.751-2.226 1.337-4.986 1.28-7.16-.145L4.038 13.47a.75.75 0 0 1-.331-.736l.155-1.06c.178-1.216 1.173-2.106 2.333-2.156l.01-.001-1.857-3.344a2.58 2.58 0 0 1 .756-3.354l.142-.092zm2.076 1.661c-.27-.486-.849-.647-1.304-.375-.472.283-.638.929-.359 1.432l2.576 4.639a.75.75 0 0 1-.773 1.105l-1.02-.161c-.519-.082-1.014.296-1.097.864l-.087.586 4.253 2.79c1.622 1.064 3.655 1.148 5.347.238l.219-.124c2.595-1.558 3.489-5.026 1.984-7.737l-.785-1.414c-.507-.913-1.611-1.221-2.477-.701l-3.718 2.232a.75.75 0 0 1-1.042-.279L7.324 4.387zM1.187 6.084a.75.75 0 1 1 1.4.538c-.503 1.309-.503 2.45 0 3.759a.75.75 0 1 1-1.4.538 6.36 6.36 0 0 1 0-4.835z",
      onClick: () => {},
      tooltip: (
        <>
          Move <span>M</span>
        </>
      ),
    },
    {
      id: 2,
      iconPath:
        "M14.38 1.75A3.25 3.25 0 0 1 17.63 5v7.917a3.25 3.25 0 0 1-3.25 3.25H6.702c-.016 0-.031.004-.044.013l-3.131 1.957A.75.75 0 0 1 2.38 17.5V5a3.25 3.25 0 0 1 3.25-3.25h8.75zm0 1.5H5.63A1.75 1.75 0 0 0 3.88 5v11.147l1.983-1.24c.201-.126.428-.204.662-.231l.177-.01h7.678a1.75 1.75 0 0 0 1.75-1.75V5a1.75 1.75 0 0 0-1.75-1.75z",
      onClick: () => {},
      tooltip: (
        <>
          Message <span>Q</span>
        </>
      ),
    },
    {
      id: 3,
      iconPath:
        "M4.79 1.54a.75.75 0 0 1 .75.75v1.75h7.167a3.25 3.25 0 0 1 3.245 3.066l.005.184-.001 7.166 1.751.001a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.75.75l-1.751-.001.001 1.751a.75.75 0 0 1-.648.743l-.102.007a.75.75 0 0 1-.75-.75l-.001-1.751-7.166.001a3.25 3.25 0 0 1-3.245-3.066l-.005-.184V5.54H2.29a.75.75 0 0 1-.743-.648L1.54 4.79a.75.75 0 0 1 .75-.75h1.75V2.29a.75.75 0 0 1 .648-.743l.102-.007zm.75 4v7.167a1.75 1.75 0 0 0 1.75 1.75l7.166-.001.001-7.166a1.75 1.75 0 0 0-1.606-1.744l-.144-.006H5.54z",
      onClick: () => {},
      tooltip: (
        <>
          Crop <span>C</span>
        </>
      ),
    },
    {
      id: 4,
      iconPath:
        "M3.5 5.756c0-2.979 3.306-4.768 5.8-3.14l6.512 4.251c2.267 1.48 2.267 4.801 0 6.28L9.3 17.398c-2.494 1.628-5.8-.161-5.8-3.14V5.756zm4.98-1.884C6.983 2.895 5 3.969 5 5.756v8.501c0 1.787 1.983 2.861 3.48 1.884l6.512-4.251a2.25 2.25 0 0 0 0-3.768L8.48 3.872z",
      onClick: () => {},
      tooltip: (
        <>
          Play <span>P</span>
        </>
      ),
    },
  ];

  return (
    <div className="flex shadow-[0px_1px_4px_-4px_rgba(0,0,0,0.08),0px_8px_16px_-12px_rgba(0,0,0,0.13)] border border-[#ececec] bg-[#fcfcfc] rounded-[1.25rem]">
      <div className="flex gap-2 p-2">
        {playmode ? (
          <>
            <Action
              iconPath="M3.275 3.275a.94.94 0 0 1 1.33 0L10 8.671l5.395-5.395a.94.94 0 0 1 1.224-.091l.105.091a.94.94 0 0 1 0 1.33L11.329 10l5.396 5.395a.94.94 0 0 1 .091 1.224l-.091.105a.94.94 0 0 1-1.33 0L10 11.329l-5.394 5.396a.94.94 0 0 1-1.224.091l-.105-.091a.94.94 0 0 1 0-1.33L8.671 10 3.275 4.605a.94.94 0 0 1-.091-1.224l.091-.105z"
              tooltip={
                <>
                  Close<span>X</span>
                </>
              }
            />
            <Action
              iconPath="M5.686 10.716a.75.75 0 0 1-1.061 1.061L2.176 9.328a2 2 0 0 1 0-2.828L4.625 4.05A.75.75 0 0 1 5.686 5.11L3.632 7.163h10.169c2.472 0 4.489 1.948 4.599 4.393l.005.211c0 2.543-2.061 4.604-4.604 4.604H9.739a.75.75 0 1 1 0-1.5h4.063c1.714 0 3.104-1.39 3.104-3.104s-1.39-3.104-3.104-3.104H3.633l2.053 2.053z"
              tooltip={
                <>
                  Back<span>B</span>
                </>
              }
            />
            <div className="w-0.25 -my-2 h-14 bg-[#ECECEC]"></div>
            <Action
              iconPath="M4.79 1.54a.75.75 0 0 1 .75.75v1.75h7.167a3.25 3.25 0 0 1 3.245 3.066l.005.184-.001 7.166 1.751.001a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.75.75l-1.751-.001.001 1.751a.75.75 0 0 1-.648.743l-.102.007a.75.75 0 0 1-.75-.75l-.001-1.751-7.166.001a3.25 3.25 0 0 1-3.245-3.066l-.005-.184V5.54H2.29a.75.75 0 0 1-.743-.648L1.54 4.79a.75.75 0 0 1 .75-.75h1.75V2.29a.75.75 0 0 1 .648-.743l.102-.007zm.75 4v7.167a1.75 1.75 0 0 0 1.75 1.75l7.166-.001.001-7.166a1.75 1.75 0 0 0-1.606-1.744l-.144-.006H5.54z"
              tooltip={
                <>
                  Crop<span>C</span>
                </>
              }
            />
          </>
        ) : (
          actions.map((action) => (
            <Action
              iconPath={action.iconPath}
              tooltip={action.tooltip}
              active={active === action.id}
              onClick={() => {
                setActive(action.id);
                action.onClick();
              }}
              key={action.id}
            />
          ))
        )}
        <ZoomControl />
        {!playmode && (
          <>
            <Action
              iconPath="M12.183 4.3a.75.75 0 0 1 1.061 0l3.44 3.441a3.25 3.25 0 0 1 0 4.596l-3.44 3.441a.75.75 0 0 1-1.061-1.061l3.441-3.441a1.75 1.75 0 0 0 .298-.397l.043-.091H3.13a.75.75 0 0 1-.743-.648l-.007-.102a.75.75 0 0 1 .75-.75h12.836l-.044-.09c-.052-.095-.114-.186-.184-.272l-.114-.125-3.44-3.441a.75.75 0 0 1 0-1.061z"
              tooltip={
                <>
                  Undo<span>U</span>
                </>
              }
              classIcon="rotate-180"
              disabled
            />
            <Action
              iconPath="M12.183 4.3a.75.75 0 0 1 1.061 0l3.44 3.441a3.25 3.25 0 0 1 0 4.596l-3.44 3.441a.75.75 0 0 1-1.061-1.061l3.441-3.441a1.75 1.75 0 0 0 .298-.397l.043-.091H3.13a.75.75 0 0 1-.743-.648l-.007-.102a.75.75 0 0 1 .75-.75h12.836l-.044-.09c-.052-.095-.114-.186-.184-.272l-.114-.125-3.44-3.441a.75.75 0 0 1 0-1.061z"
              tooltip={
                <>
                  Redo<span>R</span>
                </>
              }
            />
          </>
        )}
      </div>
      <div className="p-2 border-l border-[#ECECEC]">
        <ExportFiles />
      </div>
    </div>
  );
}

export default Toolbar;
