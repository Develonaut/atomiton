#!/bin/sh

# Husky pre-push hook - Run critical user flow tests

echo "ğŸ“¤ Running critical user flow tests before push..."

# Run Playwright E2E tests for critical user flows (max 30 seconds)
# These verify complete user journeys in real browser
pnpm test:e2e:smoke

if [ $? -ne 0 ]; then
  echo "âŒ Critical user flow tests failed!"
  echo "ğŸ’¡ Fix failing E2E tests before pushing."
  echo "ğŸ“š See docs/testing/CRITICAL_USER_FLOWS.md for test requirements"
  exit 1
fi

echo "âœ… All critical user flows passing - ready to push!"